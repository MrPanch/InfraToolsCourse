# Docker-hw2

## Как запустить и проверить что работает

1. Сначала необходимо создать данные в виде `.csv` файлов в какой-нибудь директории и указать
абсолютный путь до этой директории в `docker-compose.yml` в секции `volumes`
(сейчас там для примера стоит `/tmp/hw2/data`). Названия csv-файлов будут использованы как имена коллекций
в No-SQL БД MongoDB. При этом файлов может быть несколько, тогда и коллекций в БД будет тоже несколько
(смотри директорию `data-examples`).

2. В `docker-compose.yml` можно также конфигурировать все параметры: название БД (`DB_NAME`), директорию для монтирования
вольюма внутри контейнера (`DATA_DIR`), порт и хост БД в bridge сети (по умолчанию) (`DB_HOST` и `DB_PORT`).
Внешний порт сервера также можно менять в настройках `-ports`.

3. Чтобы все запустить из корня проекта запускаем команду:

    ```bash
        docker-compose up -V
    ```

    Опция `-V` здесь не случайно. Она позволяет при повторном перезапуске пересоздавать анонимные вольюмы.
    Таким образом при перезапуске БД будет отчищаться и переналиваться заново.

4. Дожидаемся когда в консоле появится сообщение, что сервер готов принимать запросы:

    ```bash
    server_1   | 2020-11-06T10:46:03.968Z server server start listening on 3030
    ```

    Теперь к серверу можно выполнить запросы и проверить, что ручки отдают нужные данные/статусы (по умолчанию сейчас используется порт = 3030):

    ```bash
    curl http://localhost:3030 | json_pp
    curl http://localhost:3030/health -i
    curl http://localhost:3030/unknorw_resource -i
    ```
